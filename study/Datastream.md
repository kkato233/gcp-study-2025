# Datastream まとめ

## 概要
- 対象: サーバレスCDC（変更データキャプチャ）/レプリケーション（MySQL/PostgreSQL/Oracle 等 → GCP デスティネーション）
- 主用途: オンプレ/他クラウドDBからの継続同期、BigQuery/Cloud Storage/PubSub への取り込み

## 利点
- サーバレス: 管理負担が小さく、スケールや可用性を自動管理
- 初期取込＋CDC: フルバックフィルと継続の変更取り込みを一体で構成
- 連携テンプレート: Dataflow テンプレートでスキーマ適用/整形を自動化

## 欠点
- DDL対応/スキーマ進化: すべてのDDLに完全対応ではない、複雑なスキーマ変化は設計が必要
- レイテンシ: 構成とソースのログ設定に依存、リアルタイム厳格要件にはチューニングが必要
- ネットワーク/接続: Private接続やファイアウォール設定などの初期セットアップ

## 価格の利点
- 従量: 取り込みデータ量に応じた課金で小規模開始が容易
- 運用費削減: 自前CDC基盤よりも構築/保守のコストを低減

## 価格の欠点
- 継続大量更新: 変更量が多いと費用が線形増加
- 中継/加工: Dataflow/ストレージ/ネットワーク費が別途加算

## 選定の目安
- 向く: MySQL/PG/Oracle→BigQuery/Storage/PubSub の継続同期、段階移行/二重書きの補助
- 代替: 単発移行は DMS/手動ETL、超低遅延統合はアプリ側CDC/専用ミドル検討

## コスト最適化 Tips
- フィルタリングで不要テーブル/列の除外、保持/圧縮設定
- スキーマ進化の自動適用テンプレート活用、再処理設計
- Private接続で安定/低コスト、リージョン配置の整合
